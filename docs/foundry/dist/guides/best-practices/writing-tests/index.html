<!doctype html>
<html lang="en" data-vocs>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script><link rel="preload" as="image" href="/foundry-logo.png"/><title>foundry - Ethereum Development Framework</title><meta name="description" content="Comprehensive testing strategies including unit tests, fork tests, test organization, and harness patterns for smart contracts."/><link rel="icon" href="/foundry-logo.png" type="image/png"/><meta property="og:type" content="website"/><meta property="og:title" content="foundry - Ethereum Development Framework"/><meta property="og:description" content="Comprehensive testing strategies including unit tests, fork tests, test organization, and harness patterns for smart contracts."/><meta property="og:image" content="/og-image.png"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="/og-image.png"/>
    <script type="module" crossorigin src="/assets/index-D5UbER3f.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-BvzibTpK.css">
  </head>
  <body>
    <div id="app"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/guides/best-practices/writing-tests#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/foundry-logo.png"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Introduction</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/introduction/overview" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/introduction/installation" variant="styleless" data-discover="true">Installation</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/introduction/getting-started" variant="styleless" data-discover="true">Getting Started</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/introduction/prompting" variant="styleless" data-discover="true">Prompting</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Guides</div></div><div class="vocs_Sidebar_items"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Project Setup</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/scripting-with-solidity" variant="styleless" data-discover="true">Scripting with Solidity</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/eip712" variant="styleless" data-discover="true">Implementing and Testing EIP-712 signatures</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/deterministic-deployments-using-create2" variant="styleless" data-discover="true">Deterministic deployments using CREATE2</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/forking-mainnet-with-cast-anvil" variant="styleless" data-discover="true">Forking Mainnet with Cast and Anvil</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/foundry-in-docker" variant="styleless" data-discover="true">Running Foundry inside of Docker</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/video-tutorials" variant="styleless" data-discover="true">Video tutorials</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Best Practices</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div><div class="vocs_Sidebar_items vocs_Sidebar_levelInset"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/best-practices/writing-contracts" variant="styleless" data-discover="true">Writing Contracts</a><a data-active="true" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/best-practices/writing-tests" variant="styleless" data-discover="true">Writing Tests</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/best-practices/writing-scripts" variant="styleless" data-discover="true">Writing Scripts</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/best-practices/security" variant="styleless" data-discover="true">Security</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/best-practices/key-management" variant="styleless" data-discover="true">Key Management</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/guides/best-practices/commenting" variant="styleless" data-discover="true">Commenting</a></div></section></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Forge</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/overview" variant="styleless" data-discover="true">Overview</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Tests</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div><div class="vocs_Sidebar_items vocs_Sidebar_levelInset"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/tests/overview" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/tests/writing-tests" variant="styleless" data-discover="true">Writing Tests</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/tests/cheatcodes" variant="styleless" data-discover="true">Cheatcodes</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/tests/forge-std" variant="styleless" data-discover="true">Forge Standard Library Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/tests/traces" variant="styleless" data-discover="true">Understanding Traces</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/tests/fork-testing" variant="styleless" data-discover="true">Fork Testing</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/tests/replay-testing" variant="styleless" data-discover="true">Replaying Failures</a></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Advanced Testing</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/deploying" variant="styleless" data-discover="true">Deploying and Verifying</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Gas Tracking</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/forge/debugger" variant="styleless" data-discover="true">Debugger</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Reference</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Cast</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/cast/overview" variant="styleless" data-discover="true">Overview</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/cast/reference/overview" variant="styleless" data-discover="true">Reference</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Anvil</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/anvil/overview" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/anvil/reference" variant="styleless" data-discover="true">Reference</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Chisel</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/chisel/overview" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/chisel/reference" variant="styleless" data-discover="true">Reference</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Configuration</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/overview" variant="styleless" data-discover="true">Overview</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/dynamic-test-linking" variant="styleless" data-discover="true">Dynamic Test Linking</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/continuous-integration" variant="styleless" data-discover="true">Continuous Integration</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/vscode" variant="styleless" data-discover="true">Integrating with VSCode</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/shell-autocompletion" variant="styleless" data-discover="true">Shell Autocompletion</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/static-analyzers" variant="styleless" data-discover="true">Static Analyzers</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/hardhat" variant="styleless" data-discover="true">Integrating with Hardhat</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/vyper" variant="styleless" data-discover="true">Vyper support</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/config/reference/overview" variant="styleless" data-discover="true">Reference</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_sectionTitle vocs_Sidebar_sectionTitleLink vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/overview" variant="styleless" data-discover="true">Cheatcode Reference</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div><div class="vocs_Sidebar_items"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/environment" variant="styleless" data-discover="true">Environment</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/assertions" variant="styleless" data-discover="true">Assertions</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/fuzzer" variant="styleless" data-discover="true">Fuzzer</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/forking" variant="styleless" data-discover="true">Forking</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/external" variant="styleless" data-discover="true">External</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/signing" variant="styleless" data-discover="true">Signing</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/utilities" variant="styleless" data-discover="true">Utilities</a><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/rpc" variant="styleless" data-discover="true">RPC</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/cheatcodes/fs" variant="styleless" data-discover="true">Files</a><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Forge-Std Reference</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></div></div></section><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/reference/ds-test" variant="styleless" data-discover="true">DSTest Reference</a></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Miscellaneous</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/misc/v1.0-migration" variant="styleless" data-discover="true">v1.0 migration guide</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/misc/struct-encoding" variant="styleless" data-discover="true">Struct Encoding</a><a data-active="false" class="vocs_Sidebar_item vocs_Link vocs_Link_styleless" href="/misc/faq" variant="styleless" data-discover="true">FAQ</a></div></section></div></nav></div><div class="vocs_Sidebar_footer"><div class="vocs_Sidebar_footerCurtain"></div><div class="vocs_Sidebar_footerContent"><div class="vocs_Socials"><a class="vocs_Socials_button" href="https://github.com/foundry-rs/foundry" target="_blank" rel="noopener noreferrer"><div aria-label="GitHub" class="vocs_Icon vocs_Socials_icon" role="img" style="--vocs_Icon_size:17px"><svg width="100%" height="100%" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor"></path></svg></div></a><div style="width:1px;margin-top:var(--vocs-space_4);margin-bottom:var(--vocs-space_4);background-color:var(--vocs-color_border)"></div><a class="vocs_Socials_button" href="https://t.me/foundry_support" target="_blank" rel="noopener noreferrer"><div aria-label="Telegram" class="vocs_Icon vocs_Socials_icon" role="img" style="--vocs_Icon_size:17px"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 50 50"><title>Telegram</title><path d="M25 2c12.703 0 23 10.297 23 23S37.703 48 25 48 2 37.703 2 25 12.297 2 25 2zm7.934 32.375c.423-1.298 2.405-14.234 2.65-16.783.074-.772-.17-1.285-.648-1.514-.578-.278-1.434-.139-2.427.219-1.362.491-18.774 7.884-19.78 8.312-.954.405-1.856.847-1.856 1.487 0 .45.267.703 1.003.966.766.273 2.695.858 3.834 1.172 1.097.303 2.346.04 3.046-.395.742-.461 9.305-6.191 9.92-6.693.614-.502 1.104.141.602.644-.502.502-6.38 6.207-7.155 6.997-.941.959-.273 1.953.358 2.351.721.454 5.906 3.932 6.687 4.49.781.558 1.573.811 2.298.811.725 0 1.107-.955 1.468-2.064z" fill="currentColor"></path></svg></div></a></div></div></div></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Rlj»" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search...<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/foundry-logo.png"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/introduction/getting-started" variant="styleless" data-radix-collection-item="" data-discover="true">Docs</a><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/guides/best-practices/writing-contracts" variant="styleless" data-radix-collection-item="" data-discover="true">Guides</a><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-«R25j»-trigger-radix-«R3e5j»" data-state="closed" aria-expanded="false" aria-controls="radix-«R25j»-content-radix-«R3e5j»" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">v1.2.2</button></li></ul></div></nav></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/" data-discover="true"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo" src="/foundry-logo.png"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/introduction/getting-started" variant="styleless" data-radix-collection-item="" data-discover="true">Docs</a><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/guides/best-practices/writing-contracts" variant="styleless" data-radix-collection-item="" data-discover="true">Guides</a><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-«Rcpj»-trigger-radix-«Rrcpj»" data-state="closed" aria-expanded="false" aria-controls="radix-«Rcpj»-content-radix-«Rrcpj»" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">v1.2.2</button></li></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Rkpj»" data-state="closed" class="vocs_MobileTopNav_menuTrigger vocs_MobileTopNav_navigationItem">Menu<div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Down</title><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«R19j»" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«Rqj»" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">Writing Tests</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«R5aj»" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:16px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><h2 class="vocs_H2 vocs_Heading"><div id="tests" class="vocs_Heading_slugTarget"></div>Tests<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#tests" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<hr class="vocs_HorizontalRule"/>
<h3 class="vocs_H3 vocs_Heading"><div id="general-test-guidance" class="vocs_Heading_slugTarget"></div>General Test Guidance<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#general-test-guidance" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<h4 class="vocs_H4 vocs_Heading"><div id="naming-test-files" class="vocs_Heading_slugTarget"></div>Naming test files<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#naming-test-files" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">For testing <code class="vocs_Code">MyContract.sol</code>, the test file should be <code class="vocs_Code">MyContract.t.sol</code>. For testing <code class="vocs_Code">MyScript.s.sol</code>, the test file should be <code class="vocs_Code">MyScript.t.sol</code>.</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">If the contract is big and you want to split it over multiple files, group them logically like <code class="vocs_Code">MyContract.owner.t.sol</code>, <code class="vocs_Code">MyContract.deposits.t.sol</code>, etc.</li>
</ul>
<h4 class="vocs_H4 vocs_Heading"><div id="no-assertions-in-setup" class="vocs_Heading_slugTarget"></div>No assertions in <code class="vocs_Code">setUp</code><a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#no-assertions-in-setup" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">Never make assertions in the <code class="vocs_Code">setUp</code> function, instead use a dedicated test like <code class="vocs_Code">test_SetUpState()</code> if you need to ensure your <code class="vocs_Code">setUp</code> function does what you expected. More info on why in <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/foundry-rs/foundry/issues/1291" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">foundry-rs/foundry#1291</a></p>
<h4 class="vocs_H4 vocs_Heading"><div id="organizing-and-naming-tests" class="vocs_Heading_slugTarget"></div>Organizing and Naming tests<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#organizing-and-naming-tests" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">For unit tests, there are two major ways to organize the tests:</p>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Treat contracts as describe blocks:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><code class="vocs_Code">contract Add</code> holds all unit tests for the <code class="vocs_Code">add</code> method of <code class="vocs_Code">MyContract</code>.</li>
<li class="vocs_ListItem"><code class="vocs_Code">contract Supply</code> holds all tests for the <code class="vocs_Code">supply</code> method.</li>
<li class="vocs_ListItem"><code class="vocs_Code">contract Constructor</code> hold all tests for the constructor.</li>
<li class="vocs_ListItem">A benefit of this approach is that smaller contracts should compile faster than large ones, so this approach of many small contracts should save time as test suites get large.</li>
</ul>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Have a Test contract per contract-under-test, with as many utilities and fixtures as you want:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><code class="vocs_Code">contract MyContractTest</code> holds all unit tests for <code class="vocs_Code">MyContract</code>.</li>
<li class="vocs_ListItem"><code class="vocs_Code">function test_add_AddsTwoNumbers()</code> lives within <code class="vocs_Code">MyContractTest</code> to test the <code class="vocs_Code">add</code> method.</li>
<li class="vocs_ListItem"><code class="vocs_Code">function test_supply_UsersCanSupplyTokens()</code> also lives within <code class="vocs_Code">MyContractTest</code> to test the <code class="vocs_Code">supply</code> method.</li>
<li class="vocs_ListItem">A benefit of this approach is that test output is grouped by contract-under-test, which makes it easier to quickly see where failures are.</li>
</ul>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Some general guidance for all kinds tests:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Test contracts/functions should be written in the same order as the original functions in the contract-under-test.</li>
<li class="vocs_ListItem">All unit tests that test the same function should live serially in the test file.</li>
<li class="vocs_ListItem">Test contracts can inherit from any helper contracts you want. For example <code class="vocs_Code">contract MyContractTest</code> tests <code class="vocs_Code">MyContract</code>, but may inherit from forge-std&#x27;s <code class="vocs_Code">Test</code>, as well as e.g. your own <code class="vocs_Code">TestUtilities</code> helper contract.</li>
</ul>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Integration tests should live in the same <code class="vocs_Code">test</code> directory, with a clear naming convention. These may be in dedicated files, or they may live next to related unit tests in existing test files.</p>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Be consistent with test naming, as it&#x27;s helpful for filtering tests (e.g. for gas reports you might want to filter out revert tests). When combining naming conventions, keep them alphabetical. Below is a sample of valid names. A comprehensive list of valid and invalid examples can be found <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/ScopeLift/scopelint/blob/1857e3940bfe92ac5a136827374f4b27ff083971/src/check/validators/test_names.rs#L106-L143" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a>.</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><code class="vocs_Code">test_Description</code> for standard tests.</li>
<li class="vocs_ListItem"><code class="vocs_Code">testFuzz_Description</code> for fuzz tests.</li>
<li class="vocs_ListItem"><code class="vocs_Code">test_Revert[If|When]_Condition</code> for tests expecting a revert.</li>
<li class="vocs_ListItem"><code class="vocs_Code">testFork_Description</code> for tests that fork from a network.</li>
<li class="vocs_ListItem"><code class="vocs_Code">testForkFuzz_Revert[If|When]_Condition</code> for a fuzz test that forks and expects a revert.</li>
</ul>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Name your constants and immutables using <code class="vocs_Code">ALL_CAPS_WITH_UNDERSCORES</code>, to make it easier to distinguish them from variables and functions.</p>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">When using assertions like <code class="vocs_Code">assertEq</code>, consider leveraging the last string param to make it easier to identify failures. These can be kept brief, or even just be numbers—they basically serve as a replacement for showing line numbers of the revert, e.g. <code class="vocs_Code">assertEq(x, y, &quot;1&quot;)</code> or <code class="vocs_Code">assertEq(x, y, &quot;sum1&quot;)</code>. <em>(Note: <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/foundry-rs/foundry/issues/2328" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">foundry-rs/foundry#2328</a> tracks integrating this natively).</em></p>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">When testing events, prefer setting all <code class="vocs_Code">expectEmit</code> arguments to <code class="vocs_Code">true</code>, i.e. <code class="vocs_Code">vm.expectEmit(true, true, true, true)</code> or <code class="vocs_Code">vm.expectEmit()</code>. Benefits:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">This ensures you test everything in your event.</li>
<li class="vocs_ListItem">If you add a topic (i.e. a new indexed parameter), it&#x27;s now tested by default.</li>
<li class="vocs_ListItem">Even if you only have 1 topic, the extra <code class="vocs_Code">true</code> arguments don&#x27;t hurt.</li>
</ul>
</li>
<li class="vocs_ListItem">
<p class="vocs_Paragraph">Remember to write invariant tests! For the assertion string, use a verbose english description of the invariant: <code class="vocs_Code">assertEq(x + y, z, &quot;Invariant violated: the sum of x and y must always equal z&quot;)</code>.</p>
</li>
</ol>
<h3 class="vocs_H3 vocs_Heading"><div id="fork-tests" class="vocs_Heading_slugTarget"></div>Fork Tests<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#fork-tests" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<h4 class="vocs_H4 vocs_Heading"><div id="use-fork-tests-liberally" class="vocs_Heading_slugTarget"></div>Use fork tests liberally<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#use-fork-tests-liberally" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">Don&#x27;t feel like you need to give forks tests special treatment, and use them liberally:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Mocks are <em>required</em> in closed-source web2 development—you have to mock API responses because the code for that API isn&#x27;t open source so you cannot just run it locally. But for blockchains that&#x27;s not true: any code you&#x27;re interacting with that&#x27;s already deployed can be locally executed and even modified for free. So why introduce the risk of a wrong mock if you don&#x27;t need to?</li>
<li class="vocs_ListItem">A common reason to avoid fork tests and prefer mocks is that fork tests are slow. But this is not always true. By pinning to a block number, forge caches RPC responses so only the first run is slower, and subsequent runs are significantly faster. See <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/mds1/convex-shutdown-simulation/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">this benchmark</a>, where it took forge 7 minutes for the first run with a remote RPC, but only half a second once data was cached. <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://alchemy.com" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Alchemy</a>, <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://infura.io" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Infura</a> and <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://tenderly.co" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Tenderly</a> offer free archive data, so pinning to a block shouldn&#x27;t be problematic.</li>
<li class="vocs_ListItem">Note that the <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/foundry-rs/foundry-toolchain" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">foundry-toolchain</a> GitHub Action will cache RPC responses in CI by default, and it will also update the cache when you update your fork tests.</li>
</ul>
<h4 class="vocs_H4 vocs_Heading"><div id="minimize-rpc-requests" class="vocs_Heading_slugTarget"></div>Minimize RPC requests<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#minimize-rpc-requests" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">Be careful with fuzz tests on a fork to avoid burning through RPC requests with non-deterministic fuzzing. If the input to your fork fuzz test is some parameter which is used in an RPC call to fetch data (e.g. querying the token balance of an address), each run of a fuzz test uses at least 1 RPC request, so you&#x27;ll quickly hit rate limits or usage limits. Solutions to consider:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Replace multiple RPC calls with a single <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/mds1/multicall" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">multicall</a>.</li>
<li class="vocs_ListItem">Specify a fuzz/invariant <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="/config/reference/testing#seed" data-discover="true">seed</a>: this makes sure each <code class="vocs_Code">forge test</code> invocation uses the same fuzz inputs. RPC results are cached locally, so you&#x27;ll only query the node the first time.</li>
<li class="vocs_ListItem">In CI, consider setting the fuzz seed using a <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/sablier-labs/v2-core/blob/d1157b49ed4bceeff0c4e437c9f723e88c134d3a/.github/workflows/ci.yml#L252-L254" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">computed environment variable</a> so it changes every day or every week. This gives flexibility on the tradeoff between increasing randomness to find more bugs vs. using a seed to reduce RPC requests.</li>
<li class="vocs_ListItem">Structure your tests so the data you are fuzzing over is computed locally by your contract, and not data that is used in an RPC call (may or may not be feasible based on what you&#x27;re doing).</li>
<li class="vocs_ListItem">Lastly, you can of course always run a local node or bump your RPC plan.</li>
</ul>
<h4 class="vocs_H4 vocs_Heading"><div id="configure-fork-urls-in-foundrytoml-and-use-cheatcodes" class="vocs_Heading_slugTarget"></div>Configure fork urls in <code class="vocs_Code">foundry.toml</code> and use cheatcodes<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#configure-fork-urls-in-foundrytoml-and-use-cheatcodes" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">
<p class="vocs_Paragraph">When writing fork tests, do not use the <code class="vocs_Code">--fork-url</code> flag. Instead, prefer the following approach for its improved flexibility:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Define <code class="vocs_Code">[rpc_endpoints]</code> in the <code class="vocs_Code">foundry.toml</code> config file and use the <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="/forge/tests/fork-testing#forking-cheatcodes" data-discover="true">forking cheatcodes</a>.</li>
<li class="vocs_ListItem">Access the RPC URL endpoint in your test with forge-std&#x27;s <code class="vocs_Code">stdChains.ChainName.rpcUrl</code>. See the list of supported chains and expected config file aliases <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://github.com/foundry-rs/forge-std/blob/ff4bf7db008d096ea5a657f2c20516182252a3ed/src/StdCheats.sol#L255-L271" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a>.</li>
<li class="vocs_ListItem">Always pin to a block so tests are deterministic and RPC responses are cached.</li>
<li class="vocs_ListItem">More info on this fork test approach can be found <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://twitter.com/msolomon44/status/1564742781129502722" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a> (this predates <code class="vocs_Code">StdChains</code> so that aspect is a bit out of date).</li>
</ul>
</li>
</ol>
<h3 class="vocs_H3 vocs_Heading"><div id="test-harnesses" class="vocs_Heading_slugTarget"></div>Test Harnesses<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#test-harnesses" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<h4 class="vocs_H4 vocs_Heading"><div id="internal-functions" class="vocs_Heading_slugTarget"></div>Internal Functions<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#internal-functions" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">To test <code class="vocs_Code">internal</code> functions, write a harness contract that inherits from the contract under test (CuT). Harness contracts that inherit from the CuT expose the <code class="vocs_Code">internal</code> functions as <code class="vocs_Code">external</code> ones.</p>
<p class="vocs_Paragraph">Each <code class="vocs_Code">internal</code> function that is tested should be exposed via an external one with a name that follows the pattern <code class="vocs_Code">exposed_&lt;function_name&gt;</code>. For example:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><button class="vocs_CopyButton" data-copied="false" type="button"><div aria-label="Copy" class="vocs_Icon" role="img" style="--vocs_Icon_size:18px"><svg width="100%" height="100%" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></div></button><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// file: src/MyContract.sol</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> MyContract</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> myInternalMethod</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">internal</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 42</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// file: test/MyContract.t.sol</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">MyContract</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;src/MyContract.sol&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">contract</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> MyContractHarness</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> is</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> MyContract</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // Deploy this contract then call this method to test `myInternalMethod`.</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> exposed_myInternalMethod</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">external</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> returns</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">uint</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> myInternalMethod</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h4 class="vocs_H4 vocs_Heading"><div id="private-functions" class="vocs_Heading_slugTarget"></div>Private Functions<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#private-functions" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">Unfortunately there is currently no good way to unit test <code class="vocs_Code">private</code> methods since they cannot be accessed by any other contracts. Options include:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">Converting <code class="vocs_Code">private</code> functions to <code class="vocs_Code">internal</code>.</li>
<li class="vocs_ListItem">Copy/pasting the logic into your test contract and writing a script that runs in CI check to ensure both functions are identical.</li>
</ul>
<h4 class="vocs_H4 vocs_Heading"><div id="workaround-functions" class="vocs_Heading_slugTarget"></div>Workaround Functions<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/best-practices/writing-tests#workaround-functions" data-discover="true"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">Harnesses can also be used to expose functionality or information otherwise unavailable in the original smart contract. The most straightforward example is when we want to test the length of a public array. The functions should follow the pattern: <code class="vocs_Code">workaround_&lt;function_name&gt;</code>, such as <code class="vocs_Code">workaround_queueLength()</code>.</p>
<p class="vocs_Paragraph">Another use case for this is tracking data that you would not track in production to help test invariants. For example, you might store a list of all token holders to simplify validation of the invariant &quot;sum of all balances must equal total supply&quot;. These are often known as &quot;ghost variables&quot;. You can learn more about this in <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://twitter.com/rikardhjort" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Rikard Hjort</a>&#x27;s <a class="vocs_Anchor vocs_Link vocs_Link_accent" href="https://youtu.be/ETlNhV9jYJw" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Formal Methods for the Working DeFi Dev</a> talk.</p></article><footer class="vocs_Footer" data-layout="docs"><div class="vocs_Footer_container"><div><a class="vocs_Footer_editLink vocs_Link vocs_Link_accent" href="https://github.com/foundry-rs/book/edit/master/vocs/docs/pages/guides/best-practices/writing-tests.md" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg> <!-- -->Suggest changes on GitHub</a></div></div></footer></div><div data-bottom-observer="true"></div></div></div>
  </body>
</html>
