import{j as s}from"./index-D5UbER3f.js";import{u as n}from"./index-CZxYc6i7.js";const c=void 0;function i(e){const l={a:"a",code:"code",div:"div",h2:"h2",h3:"h3",p:"p",pre:"pre",span:"span",...n(),...e.components};return s.jsxs(s.Fragment,{children:[s.jsxs(l.h2,{id:"signdelegation",children:[s.jsx(l.code,{children:"signDelegation"}),s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#signdelegation",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(l.h3,{id:"signature",children:["Signature",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#signature",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/// Holds a signed EIP-7702 authorization for an authority account to delegate to an implementation."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"struct"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" SignedDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // The y-parity of the recovered secp256k1 signature (0 or 1)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint8"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" v;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // First 32 bytes of the signature."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes32"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" r;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Second 32 bytes of the signature."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes32"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" s;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // The current nonce of the authority account at signing time."})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Used to ensure signature can't be replayed after account nonce changes."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint64"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" nonce;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Address of the contract implementation that will be delegated to."})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Gets encoded into delegation code: 0xef0100 || implementation."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" implementation;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/// Sign an EIP-7702 authorization for delegation."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" signDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" implementation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" privateKey"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    external"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"SignedDelegation"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" signedDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]})]})})}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/// Designate the next call as an EIP-7702 transaction."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" attachDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"SignedDelegation"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" signedDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]})]})})}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/// Sign an EIP-7702 authorization and designate the next call as an EIP-7702 transaction."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" signAndAttachDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" implementation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" privateKey"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    external"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"SignedDelegation"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" signedDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]})]})})}),`
`,s.jsxs(l.h3,{id:"description",children:["Description",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#description",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(l.p,{children:["Signs an ",s.jsx(l.a,{href:"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-7702.md",children:"EIP-7702"})," authorization for delegation."]}),`
`,s.jsxs(l.p,{children:["To use the cheatcodes you need to set your ",s.jsx(l.code,{children:"evm_version"})," to at least the ",s.jsx(l.code,{children:"prague"})," hardfork in your ",s.jsx(l.code,{children:"foundry.toml"}),"."]}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsx(l.code,{children:s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"evm_version = "}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"prague"'})]})})})}),`
`,s.jsx(l.p,{children:"EIP-7702 sets the account code of an Externally Owned Account (EOA) through a delegation transaction, enabling EOAs to behave like smart contracts."}),`
`,s.jsxs(l.p,{children:["The ",s.jsx(l.code,{children:"signDelegation"})," cheatcode generates a signed authorization for an implementation contract to be delegated to, ensuring that only authorized implementations can execute transactions on behalf of the authority account. The signature includes the authority account's nonce to prevent replay attacks."]}),`
`,s.jsxs(l.p,{children:["The ",s.jsx(l.code,{children:"attachDelegation"})," cheatcode designates the next transaction as an EIP-7702 delegation by attaching the signed authorization."]}),`
`,s.jsxs(l.p,{children:["The ",s.jsx(l.code,{children:"signAndAttachDelegation"})," function combines both signing and attaching into a single step, simplifying the delegation process."]}),`
`,s.jsxs(l.h3,{id:"examples",children:["Examples",s.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#examples",children:s.jsx(l.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(l.p,{children:["Let's first define a ",s.jsx(l.code,{children:"SimpleDelegateContract"})," and a dummy ",s.jsx(l.code,{children:"ERC20"})," to be used:"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// SPDX-License-Identifier: MIT"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"pragma"}),s.jsx(l.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:" solidity"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ^0.8.17"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" SimpleDelegateContract"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    event"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Executed"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" indexed"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" to"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" value"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" data"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    struct"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Call"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        bytes"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data;"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" to;"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" value;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" execute"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"Call"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"[] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"memory"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" calls"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" payable"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        for"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" i "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"; i "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"<"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" calls.length; i"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"++"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            Call "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" call "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" calls[i];"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bool"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" success, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" result) "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" call.to.call{value"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" call.value}(call.data);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"            require"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(success, "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"string"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(result));"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"            emit"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" Executed"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(call.to, call.value, call.data);"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"    receive"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" payable"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {}"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" ERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" minter;"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    mapping"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"private"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _balances;"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    constructor"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _minter) {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        minter "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _minter;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" mint"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" amount"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" to"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        _mint"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(to, amount);"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" balanceOf"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" account"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" view"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        return"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _balances[account];"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _mint"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" account"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" amount"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"internal"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        require"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"msg.sender"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" minter, "}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"ERC20: msg.sender is not minter"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        require"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(account "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"!="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"), "}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"ERC20: mint to the zero address"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        unchecked"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            _balances[account] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"+="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" amount;"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsxs(l.p,{children:["Next, to use the cheatcodes with ",s.jsx(l.code,{children:"forge test"}),":"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" SignDelegationTest"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" is"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Test"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Alice's address and private key (EOA with no initial contract code)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" payable"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ALICE_ADDRESS "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" payable"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0x70997970C51812dc3A010C7d01b50e0d17dc79C8"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ALICE_PK "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Bob's address and private key (Bob will execute transactions on Alice's behalf)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" BOB_ADDRESS "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" BOB_PK "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // The contract that Alice will delegate execution to."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    SimpleDelegateContract "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" implementation;"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // ERC-20 token contract for minting test tokens."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    ERC20 "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" token;"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" setUp"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Deploy the delegation contract (Alice will delegate calls to this contract)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        implementation "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" SimpleDelegateContract"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Deploy an ERC-20 token contract where Alice is the minter."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        token "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" ERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ALICE_ADDRESS);"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" testSignDelegationAndThenAttachDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Construct a single transaction call: Mint 100 tokens to Bob."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        SimpleDelegateContract.Call[] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" calls "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SimpleDelegateContract.Call[]("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"1"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" abi"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"encodeCall"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ERC20.mint, ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", BOB_ADDRESS));"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        calls["}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SimpleDelegateContract."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"Call"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({to"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(token), data"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data, value"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"});"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Alice signs a delegation allowing `implementation` to execute transactions on her behalf."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        Vm.SignedDelegation "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" signedDelegation "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"signDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(implementation), ALICE_PK);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Bob attaches the signed delegation from Alice and broadcasts it."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"broadcast"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(BOB_PK);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"attachDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(signedDelegation);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Verify that Alice's account now behaves as a smart contract."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" code "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ALICE_ADDRESS).code;"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        require"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(code.length "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:">"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"no code written to Alice"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // As Bob, execute the transaction via Alice's assigned contract."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        SimpleDelegateContract"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ALICE_ADDRESS)."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"execute"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(calls);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Verify Bob successfully received 100 tokens."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        assertEq"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(token."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"balanceOf"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(BOB_ADDRESS), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" testSignAndAttachDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Construct a single transaction call: Mint 100 tokens to Bob."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        SimpleDelegateContract.Call[] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" calls "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SimpleDelegateContract.Call[]("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"1"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" abi"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"encodeCall"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ERC20.mint, ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", BOB_ADDRESS));"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        calls["}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SimpleDelegateContract."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"Call"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({to"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(token), data"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data, value"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"});"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Alice signs and attaches the delegation in one step (eliminating the need for separate signing)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"signAndAttachDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(implementation), ALICE_PK);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Verify that Alice's account now behaves as a smart contract."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" code "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ALICE_ADDRESS).code;"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        require"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(code.length "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:">"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"no code written to Alice"'}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // As Bob, execute the transaction via Alice's assigned contract."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"broadcast"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(BOB_PK);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        SimpleDelegateContract"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ALICE_ADDRESS)."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"execute"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(calls);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Verify Bob successfully received 100 tokens."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"assertEq"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(token."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"balanceOf"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(BOB_ADDRESS), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsxs(l.p,{children:["Or alternatively, let's use the cheatcodes in ",s.jsx(l.code,{children:"forge script"})," against an ",s.jsx(l.code,{children:"EIP-7702"})," compatible Anvil instance:"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsx(l.code,{children:s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"anvil"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --hardfork"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" prague"})]})})})}),`
`,s.jsxs(l.p,{children:["Next, to use the cheatcodes in ",s.jsx(l.code,{children:"forge script"}),":"]}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// SPDX-License-Identifier: MIT"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"pragma"}),s.jsx(l.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:" solidity"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ^0.8.17"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"contract"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" SignDelegationScript"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" is"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" Script"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Alice's address and private key (EOA with no initial contract code)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" payable"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ALICE_ADDRESS "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" payable"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0x70997970C51812dc3A010C7d01b50e0d17dc79C8"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ALICE_PK "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Bob's address and private key (Bob will execute transactions on Alice's behalf)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" BOB_ADDRESS "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" BOB_PK "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Deployer's address and private key (used to deploy contracts)."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" private"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" DEPLOYER_ADDRESS "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0xa0Ee7A142d267C1f36714E4a8F75612F20a79720"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    uint256"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" private"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" constant"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" DEPLOYER_PK "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0x2a871d0798f97d79848a013d4936a73bf4cc922c825d33c1cf7073dff6d409c6"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // The contract that Alice will delegate execution to."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    SimpleDelegateContract "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" implementation;"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // ERC-20 token contract for minting test tokens."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    ERC20 "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" token;"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" run"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Step 1: Deploy delegation and ERC-20 contracts using the Deployer's key."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"broadcast"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(DEPLOYER_PK);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        implementation "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" SimpleDelegateContract"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        token "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" ERC20"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ALICE_ADDRESS);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Construct a single transaction call: Mint 100 tokens to Bob."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        SimpleDelegateContract.Call[] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" calls "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" new"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SimpleDelegateContract.Call[]("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"1"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        bytes"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" abi"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"encodeCall"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ERC20.mint, ("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", BOB_ADDRESS));"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        calls["}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"] "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SimpleDelegateContract."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"Call"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({to"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(token), data"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" data, value"}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 0"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"});"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Alice signs a delegation allowing `implementation` to execute transactions on her behalf."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        Vm.SignedDelegation "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"memory"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" signedDelegation "}),s.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"signDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(implementation), ALICE_PK);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Bob attaches the signed delegation from Alice and broadcasts it."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"broadcast"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(BOB_PK);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"attachDelegation"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(signedDelegation);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // As Bob, execute the transaction via Alice's assigned contract."})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"        SimpleDelegateContract"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(ALICE_ADDRESS)."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"execute"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(calls);"})]}),`
`,s.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"        // Verify balance"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        vm."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"assertEq"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(token."}),s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"balanceOf"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(BOB_ADDRESS), "}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"100"}),s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})}),`
`,s.jsx(l.p,{children:"To run the script:"}),`
`,s.jsx(s.Fragment,{children:s.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsx(l.code,{children:s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" script"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" script/SignDelegation.s.sol"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --rpc-url"}),s.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" http://localhost:8545"}),s.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --broadcast"})]})})})})]})}function d(e={}){const{wrapper:l}={...n(),...e.components};return l?s.jsx(l,{...e,children:s.jsx(i,{...e})}):i(e)}export{d as default,c as frontmatter};
