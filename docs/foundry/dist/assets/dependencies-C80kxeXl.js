import{j as e}from"./index-D5UbER3f.js";import{u as r}from"./index-CZxYc6i7.js";const a={description:"Manage smart contract dependencies with git submodules, remappings, and package installation in Foundry projects."};function n(i){const s={a:"a",code:"code",div:"div",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...r(),...i.components};return e.jsxs(e.Fragment,{children:[e.jsxs(s.h2,{id:"dependencies",children:["Dependencies",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#dependencies",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["Forge manages dependencies using ",e.jsx(s.a,{href:"https://git-scm.com/book/en/v2/Git-Tools-Submodules",children:"git submodules"})," by default, which means that it works with any GitHub repository that contains smart contracts."]}),`
`,e.jsxs(s.h3,{id:"adding-a-dependency",children:["Adding a dependency",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#adding-a-dependency",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["To add a dependency, run ",e.jsx(s.a,{href:"/forge/reference/forge-update",children:e.jsx(s.code,{children:"forge install"})}),":"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" install"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" vectorized/solady"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"Installing"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" solady"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" in"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" /private/var/folders/x4/z46ytl8n5msgkg6dst5hwwhh0000gn/T/tmp.AkOjwj9xvM/hello_foundry/lib/solady"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (url: "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"Some"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:'"https://github.com/vectorized/solady"'}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:","}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" tag:"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" None"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"    Installed"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" solady"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" v0.1.19"})]})]})})}),`
`,e.jsxs(s.p,{children:["This pulls the ",e.jsx(s.code,{children:"solady"})," library, stages the ",e.jsx(s.code,{children:".gitmodules"})," file in git and makes a commit with the message ",e.jsx(s.code,{children:"Installed solady"}),"."]}),`
`,e.jsxs(s.p,{children:["If we now check the ",e.jsx(s.code,{children:"lib"})," folder:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"tree"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" ."}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -d"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -L"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 1"})]}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"."})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"├──"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" lib"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"├──"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" script"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"├──"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" src"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"└──"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" test"})]}),`
`,e.jsx(s.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"5"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" directories"})]})]})})}),`
`,e.jsxs(s.p,{children:["We can see that Forge installed ",e.jsx(s.code,{children:"solady"}),"!"]}),`
`,e.jsxs(s.p,{children:["By default, ",e.jsx(s.code,{children:"forge install"})," installs the latest master branch version. If you want to install a specific tag or commit, you can do it like so:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" install"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" vectorized/solady@v0.1.3"})]})})})}),`
`,e.jsxs(s.h3,{id:"remapping-dependencies",children:["Remapping dependencies",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#remapping-dependencies",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"Forge can remap dependencies to make them easier to import. Forge will automatically try to deduce some remappings for you:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" remappings"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge-std/"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"=lib/forge-std/src/"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"solady/"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"=lib/solady/src/"})]})]})})}),`
`,e.jsx(s.p,{children:"These remappings mean:"}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:["To import from ",e.jsx(s.code,{children:"forge-std"})," we would write: ",e.jsx(s.code,{children:'import "forge-std/Contract.sol";'})]}),`
`,e.jsxs(s.li,{children:["To import from ",e.jsx(s.code,{children:"solady"})," we would write: ",e.jsx(s.code,{children:'import "solady/Contract.sol";'})]}),`
`]}),`
`,e.jsxs(s.p,{children:["You can customize these remappings by creating a ",e.jsx(s.code,{children:"remappings.txt"})," file in the root of your project."]}),`
`,e.jsxs(s.p,{children:["Let's create a remapping called ",e.jsx(s.code,{children:"solady-utils"})," that points to the ",e.jsx(s.code,{children:"utils"})," folder in the ",e.jsx(s.code,{children:"solady"})," repository!"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"@solady-utils/"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"=lib/solady/src/utils/"})]})})})}),`
`,e.jsxs(s.p,{children:["You can also set remappings in ",e.jsx(s.code,{children:"foundry.toml"}),"."]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"remappings = ["})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'    "@solady-utils/=lib/solady/src/utils/"'}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})})]})})}),`
`,e.jsxs(s.p,{children:["Now we can import any of the contracts in ",e.jsx(s.code,{children:"src/utils"})," of the ",e.jsx(s.code,{children:"solady"})," repository like so:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"LibString"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@solady-utils/LibString.sol"'}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]})})})}),`
`,e.jsxs(s.h3,{id:"remapping-conflicts",children:["Remapping conflicts",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#remapping-conflicts",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["In some cases, you may encounter dependency conflicts when two or more git submodules include different dependencies with the same namespace. For example, suppose you have installed both ",e.jsx(s.code,{children:"org/lib_1"})," and ",e.jsx(s.code,{children:"org/lib_2"}),", and they each reference their own versions of ",e.jsx(s.code,{children:"@openzeppelin"}),". In such scenarios, ",e.jsx(s.code,{children:"forge remappings"})," generates a single remapping entry for the namespace, which will point to only one of the two ",e.jsx(s.code,{children:"@openzeppelin"})," libraries."]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" remappings"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"@openzeppelin/"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"=lib/lib_1/node_modules/@openzeppelin/"})]})]})})}),`
`,e.jsxs(s.p,{children:["This situation can lead to import issues, causing ",e.jsx(s.code,{children:"forge build"})," to fail or introduce unexpected behavior into your contracts. To resolve this, you can add remapping contexts to your ",e.jsx(s.code,{children:"remappings.txt"})," file. This instructs the compiler to use different remappings in distinct compilation contexts, resolving the conflict. For example, to address the conflict between ",e.jsx(s.code,{children:"lib_1"})," and ",e.jsx(s.code,{children:"lib_2"}),", you would update your remappings.txt as follows:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"lib/lib_1/:@openzeppelin/"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"=lib/lib_1/node_modules/@openzeppelin/"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"lib/lib_2/:@openzeppelin/"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"=lib/lib_2/node_modules/@openzeppelin/"})]})]})})}),`
`,e.jsxs(s.p,{children:["This approach ensures that each dependency is mapped to the appropriate library version, avoiding potential issues. For more information about remapping, please see the ",e.jsx(s.a,{href:"https://docs.soliditylang.org/en/latest/path-resolution.html#import-remapping",children:"Solidity Lang Docs"}),"."]}),`
`,e.jsxs(s.h3,{id:"updating-dependencies",children:["Updating dependencies",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#updating-dependencies",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["You can update a specific dependency to the latest commit on the version you have specified using ",e.jsx(s.a,{href:"/forge/reference/forge-update",children:e.jsx(s.code,{children:"forge update <dep>"})}),". For example, if we wanted to pull the latest commit from our previously installed master-version of ",e.jsx(s.code,{children:"solady"}),", we would run:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" update"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" lib/solady"})]})})})}),`
`,e.jsxs(s.p,{children:["Alternatively, you can do this for all dependencies at once by just running ",e.jsx(s.code,{children:"forge update"}),"."]}),`
`,e.jsxs(s.h3,{id:"removing-dependencies",children:["Removing dependencies",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#removing-dependencies",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["You can remove dependencies using ",e.jsx(s.a,{href:"/forge/reference/forge-remove",children:e.jsx(s.code,{children:"forge remove <deps>..."})}),", where ",e.jsx(s.code,{children:"<deps>"})," is either the full path to the dependency or just the name. For example, to remove ",e.jsx(s.code,{children:"solady"})," both of these commands are equivalent:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" remove"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" solady"})]}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"# ... is equivalent to ..."})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" remove"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" lib/solady"})]})]})})}),`
`,e.jsxs(s.h3,{id:"hardhat-compatibility",children:["Hardhat compatibility",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#hardhat-compatibility",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["Forge also supports Hardhat-style projects where dependencies are npm packages (stored in ",e.jsx(s.code,{children:"node_modules"}),") and contracts are stored in ",e.jsx(s.code,{children:"contracts"})," as opposed to ",e.jsx(s.code,{children:"src"}),"."]}),`
`,e.jsxs(s.p,{children:["To enable Hardhat compatibility mode pass the ",e.jsx(s.code,{children:"--hh"})," flag."]})]})}function o(i={}){const{wrapper:s}={...r(),...i.components};return s?e.jsx(s,{...i,children:e.jsx(n,{...i})}):n(i)}export{o as default,a as frontmatter};
