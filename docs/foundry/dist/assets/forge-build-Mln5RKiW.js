import{j as e}from"./index-D5UbER3f.js";import l from"./core-build-options-Dgi0sYgk.js";import d from"./watch-options-BnHHaP1Q.js";import a from"./common-options-GfkPOrEd.js";import{u as n}from"./index-CZxYc6i7.js";import"./compiler-options-BCpvSNbq.js";import"./project-options-BKric660.js";const k=void 0;function r(s){const i={a:"a",blockquote:"blockquote",code:"code",div:"div",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",ul:"ul",...n(),...s.components};return e.jsxs(e.Fragment,{children:[e.jsxs(i.h2,{id:"forge-build",children:["forge build",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#forge-build",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.h3,{id:"name",children:["NAME",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#name",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(i.p,{children:"forge-build - Build the project's smart contracts."}),`
`,e.jsxs(i.h3,{id:"synopsis",children:["SYNOPSIS",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#synopsis",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:[e.jsx(i.code,{children:"forge build"})," or ",e.jsx(i.code,{children:"forge b"})," [",e.jsx(i.em,{children:"options"}),"]"]}),`
`,e.jsxs(i.h3,{id:"description",children:["DESCRIPTION",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#description",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(i.p,{children:"Build the project's smart contracts."}),`
`,e.jsx(i.p,{children:`The command will try to detect the latest version that can compile your project by looking at the
version requirements of all your contracts and dependencies.`}),`
`,e.jsxs(i.p,{children:["You can override this behaviour by passing ",e.jsx(i.code,{children:"--no-auto-detect"}),". Alternatively, you can pass ",e.jsx(i.code,{children:"--use <SOLC_VERSION>"}),"."]}),`
`,e.jsxs(i.p,{children:[`If the command detects that the Solidity compiler version it is using to build is not installed,
it will download it and install it in `,e.jsx(i.code,{children:"~/.svm"}),". You can disable this behavior by passing ",e.jsx(i.code,{children:"--offline"}),"."]}),`
`,e.jsxs(i.p,{children:["The build is incremental, and the build cache is saved in ",e.jsx(i.code,{children:"cache/"}),` in the project root by default. If you
want to clear the cache, pass `,e.jsx(i.code,{children:"--force"}),", and if you want to change the cache directory, pass ",e.jsx(i.code,{children:"--cache-path <PATH>"}),"."]}),`
`,e.jsx(i.p,{children:"It is possible to choose sources to build by specifying multiple path options (can be paths to source directories or files)."}),`
`,e.jsxs(i.h4,{id:"build-modes",children:["Build Modes",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#build-modes",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(i.p,{children:"There are three build modes:"}),`
`,e.jsxs(i.ul,{children:[`
`,e.jsxs(i.li,{children:["Just compilation (default): Builds the project and saves the contract artifacts in ",e.jsx(i.code,{children:"out/"})," (or the path specified by ",e.jsx(i.code,{children:"--out <PATH>"}),")."]}),`
`,e.jsxs(i.li,{children:["Size mode (",e.jsx(i.code,{children:"--sizes"}),"): Builds the project, displays the size of non-test contracts and exits with code 1 if any of them are above the size limit."]}),`
`,e.jsxs(i.li,{children:["Name mode (",e.jsx(i.code,{children:"--names"}),"): Builds the project, displays the names of the contracts and exits."]}),`
`]}),`
`,e.jsxs(i.h4,{id:"the-optimizer",children:["The Optimizer",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#the-optimizer",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:["You can enable the optimizer by passing ",e.jsx(i.code,{children:"--optimize"}),", and you can adjust the number of optimizer runs by passing ",e.jsx(i.code,{children:"--optimizer-runs <RUNS>"}),"."]}),`
`,e.jsxs(i.p,{children:["You can also opt-in to the Solidity IR compilation pipeline by passing ",e.jsx(i.code,{children:"--via-ir"}),". Read more about the IR pipeline in the [Solidity docs][ir-pipeline]."]}),`
`,e.jsx(i.p,{children:"By default, the optimizer is enabled and runs for 200 cycles."}),`
`,e.jsxs(i.h5,{id:"conditional-optimizer-usage",children:["Conditional Optimizer Usage",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#conditional-optimizer-usage",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(i.p,{children:"Many projects use the solc optimizer, either through the standard compilation pipeline or the IR pipeline. But in some cases, the optimizer can significantly slow down compilation speeds."}),`
`,e.jsx(i.p,{children:"A config file for a project using the optimizer may look like this for regular compilation:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(i.code,{children:[e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"default"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"solc-version = "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"0.8.17"'})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"optimizer = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"true"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"optimizer-runs = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"10_000_000"})]})]})})}),`
`,e.jsxs(i.p,{children:["Or like this for ",e.jsx(i.code,{children:"via-ir"}),":"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(i.code,{children:[e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"default"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"solc-version = "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"0.8.17"'})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"via_ir = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"true"})]})]})})}),`
`,e.jsxs(i.p,{children:["To reduce compilation speeds during development and testing, one approach is to have a ",e.jsx(i.code,{children:"lite"})," profile that has the optimizer off and use this for development/testing cycle. The updated config file for regular compilation may look like this:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(i.code,{children:[e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"default"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"solc-version = "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"0.8.17"'})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"optimizer = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"true"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"optimizer-runs = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"10_000_000"})]}),`
`,e.jsx(i.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"lite"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"optimizer = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"false"})]})]})})}),`
`,e.jsxs(i.p,{children:["Or like this for ",e.jsx(i.code,{children:"via-ir"}),":"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(i.code,{children:[e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"default"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"solc-version = "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"0.8.17"'})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"via_ir = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"true"})]}),`
`,e.jsx(i.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"lite"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"optimizer_details"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"yulDetails"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"optimizerSteps = "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"''"})]})]})})}),`
`,e.jsxs(i.p,{children:["When setup like this, ",e.jsx(i.code,{children:"forge build"})," (or ",e.jsx(i.code,{children:"forge test"})," / ",e.jsx(i.code,{children:"forge script"}),") still uses the standard profile, so by default a ",e.jsx(i.code,{children:"forge script"})," invocation will deploy your contracts with the production setting. Running ",e.jsx(i.code,{children:"FOUNDRY_PROFILE=lite forge build"})," (and again, same for the test and script commands) will use the lite profile to reduce compilation times."]}),`
`,e.jsxs(i.blockquote,{children:[`
`,e.jsxs(i.p,{children:["There are additional optimizer details you can configure, see the ",e.jsx(i.a,{href:"#additional-optimizer-settings",children:"Additional Optimizer Settings"})," section below for more info."]}),`
`]}),`
`,e.jsxs(i.h4,{id:"artifacts",children:["Artifacts",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#artifacts",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:["You can add extra output from the Solidity compiler to your artifacts by passing ",e.jsx(i.code,{children:"--extra-output <SELECTOR>"}),"."]}),`
`,e.jsx(i.p,{children:"The selector is a path in the Solidity compiler output, which you can read more about in the [Solidity docs][output-desc]."}),`
`,e.jsxs(i.p,{children:["You can also write some of the compiler output to separate files by passing ",e.jsx(i.code,{children:"--extra-output-files <SELECTOR>"}),"."]}),`
`,e.jsxs(i.p,{children:["Valid selectors for ",e.jsx(i.code,{children:"--extra-output-files"})," are:"]}),`
`,e.jsxs(i.ul,{children:[`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"metadata"}),": Written as a ",e.jsx(i.code,{children:"metadata.json"})," file in the artifacts directory"]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"ir"}),": Written as a ",e.jsx(i.code,{children:".ir"})," file in the artifacts directory"]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"irOptimized"}),": Written as a ",e.jsx(i.code,{children:".iropt"})," file in the artifacts directory"]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"ewasm"}),": Written as a ",e.jsx(i.code,{children:".ewasm"})," file in the artifacts directory"]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"evm.assembly"}),": Written as a ",e.jsx(i.code,{children:".asm"})," file in the artifacts directory"]}),`
`]}),`
`,e.jsxs(i.h4,{id:"watch-mode",children:["Watch Mode",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#watch-mode",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:["The command can be run in watch mode by passing ",e.jsx(i.code,{children:"--watch [PATH...]"}),`, which will rebuild every time a
watched file or directory is changed. The source directory is watched by default.`]}),`
`,e.jsxs(i.h4,{id:"sparse-mode-experimental",children:["Sparse Mode (experimental)",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#sparse-mode-experimental",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(i.p,{children:"Sparse mode only compiles files that match certain criteria."}),`
`,e.jsxs(i.p,{children:[`By default, this filter applies to files that have not been changed since the last build, but for commands that
take file filters (e.g. `,e.jsx(i.a,{href:"/forge/reference/forge-test",children:"forge test"}),"), sparse mode will only recompile files that match the filter."]}),`
`,e.jsxs(i.p,{children:["Sparse mode is opt-in until the feature is stabilized. To opt-in to sparse mode and try it out, set [",e.jsx(i.code,{children:"sparse_mode"}),`][sparse-mode]
in your configuration file.`]}),`
`,e.jsxs(i.h4,{id:"additional-optimizer-settings",children:["Additional Optimizer Settings",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#additional-optimizer-settings",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:["The optimizer can be fine-tuned with additional settings. Simply set the ",e.jsx(i.code,{children:"optimizer_details"})," table in your configuration file. For example:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(i.code,{children:[e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"default"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"optimizer_details"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"constantOptimizer = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"true"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"yul = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"true"})]}),`
`,e.jsx(i.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"default"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"optimizer_details"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"yulDetails"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"stackAllocation = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"true"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"optimizerSteps = "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"'dhfoDgvulfnTUtnIf'"})]})]})})}),`
`,e.jsxs(i.p,{children:["See the ",e.jsx(i.a,{href:"https://docs.soliditylang.org/en/latest/using-the-compiler.html#compiler-input-and-output-json-description",children:"compiler input description documentation"}),`
for more information on available settings (specifically `,e.jsx(i.code,{children:"settings.optimizer.details"}),")."]}),`
`,e.jsxs(i.h4,{id:"revert-strings",children:["Revert Strings",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#revert-strings",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(i.p,{children:"You can control how revert strings are generated by the compiler. By default, only user supplied revert strings are included in the bytecode, but there are other options:"}),`
`,e.jsxs(i.ul,{children:[`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"strip"}),": Removes all revert strings (if possible, i.e. if literals are used) keeping side-effects."]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"debug"}),": Injects strings for compiler-generated internal reverts, implemented for ABI encoders V1 and V2 for now."]}),`
`,e.jsxs(i.li,{children:[e.jsx(i.code,{children:"verboseDebug"}),": Appends further information to user-supplied revert strings (not yet implemented)."]}),`
`]}),`
`,e.jsxs(i.h4,{id:"additional-model-checker-settings",children:["Additional Model Checker settings",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#additional-model-checker-settings",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:[e.jsx(i.a,{href:"https://docs.soliditylang.org/en/latest/smtchecker.html#tutorial",children:"Solidity's built-in model checker"})," is an opt-in module that can be enabled via the ",e.jsx(i.code,{children:"ModelChecker"})," object."]}),`
`,e.jsxs(i.p,{children:["See ",e.jsxs(i.a,{href:"https://docs.soliditylang.org/en/latest/using-the-compiler.html#compiler-input-and-output-json-description",children:["Compiler Input Description ",e.jsx(i.code,{children:"settings.modelChecker"})]})," and ",e.jsx(i.a,{href:"https://docs.soliditylang.org/en/latest/smtchecker.html#smtchecker-options-and-tuning",children:"the model checker's options"}),"."]}),`
`,e.jsxs(i.p,{children:["The module is available in ",e.jsx(i.code,{children:"solc"})," release binaries for OSX and Linux. The latter requires the z3 library version [4.8.8, 4.8.14] to be installed in the system (SO version 4.8)."]}),`
`,e.jsxs(i.p,{children:["Similarly to the optimizer settings above, the ",e.jsx(i.code,{children:"model_checker"})," settings must be prefixed with the profile they correspond to: ",e.jsx(i.code,{children:"[profile.default.model_checker]"})," belongs to the ",e.jsx(i.code,{children:"[profile.default]"}),"."]}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(i.code,{children:[e.jsx(i.span,{className:"line",children:e.jsx(i.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"## foundry.toml"})}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"["}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"profile"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"default"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"."}),e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"model_checker"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"]"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"contracts = { '/path/to/project/src/Contract.sol' = [ "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"'Contract'"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ] }"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"engine = "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"'chc'"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"timeout = "}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"10000"})]}),`
`,e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"targets = [ "}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"'assert'"}),e.jsx(i.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ]"})]})]})})}),`
`,e.jsxs(i.p,{children:[`The fields above are recommended when using the model checker.
Setting which contract should be verified is extremely important, otherwise all available contracts will be verified which can consume a lot of time.
The recommended engine is `,e.jsx(i.code,{children:"chc"}),", but ",e.jsx(i.code,{children:"bmc"})," and ",e.jsx(i.code,{children:"all"}),` (runs both) are also accepted.
It is also important to set a proper timeout (given in milliseconds), since the default time given to the underlying solvers may not be enough.
If no verification targets are given, only assertions will be checked.`]}),`
`,e.jsxs(i.p,{children:["The model checker will run when ",e.jsx(i.code,{children:"forge build"})," is invoked, and will show findings as warnings if any."]}),`
`,e.jsxs(i.h3,{id:"options",children:["OPTIONS",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#options",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.h4,{id:"build-options",children:["Build Options",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#build-options",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:[e.jsx(i.code,{children:"--names"}),`
    Print compiled contract names.`]}),`
`,e.jsxs(i.p,{children:[e.jsx(i.code,{children:"--sizes"}),`
    Print compiled non-test contract sizes, exiting with code 1 if any of them are above the size limit.`]}),`
`,e.jsxs(i.p,{children:[e.jsx(i.code,{children:"--skip"}),`
    Skip compilation of non-essential contract directories like test or script (usage `,e.jsx(i.code,{children:"--skip test"}),")."]}),`
`,e.jsxs(i.p,{children:[e.jsx(i.code,{children:"[PATHS]..."}),"    Build source files from specified paths."]}),`
`,e.jsx(l,{}),`
`,e.jsx(d,{}),`
`,e.jsx(a,{}),`
`,e.jsxs(i.h3,{id:"examples",children:["EXAMPLES",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#examples",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.ol,{children:[`
`,e.jsxs(i.li,{children:[`
`,e.jsx(i.p,{children:"Build the project:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(i.code,{children:e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"})]})})})}),`
`]}),`
`,e.jsxs(i.li,{children:[`
`,e.jsx(i.p,{children:"Build the project with solc 0.6.0:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(i.code,{children:e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --use"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" solc:0.6.0"})]})})})}),`
`]}),`
`,e.jsxs(i.li,{children:[`
`,e.jsx(i.p,{children:"Build the project with additional artifact output:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(i.code,{children:e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --extra-output"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" evm.assembly"})]})})})}),`
`]}),`
`,e.jsxs(i.li,{children:[`
`,e.jsx(i.p,{children:"Build the project in watch mode:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(i.code,{children:e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(i.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --watch"})]})})})}),`
`]}),`
`,e.jsxs(i.li,{children:[`
`,e.jsxs(i.p,{children:["Build source files from ",e.jsx(i.code,{children:"test/invariant"})," directory and ",e.jsx(i.code,{children:"test/RegressionTest.sol"}),":"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(i.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(i.code,{children:e.jsxs(i.span,{className:"line",children:[e.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"forge"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" test/invariant"}),e.jsx(i.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" test/RegressionTest.sol"})]})})})}),`
`]}),`
`]}),`
`,e.jsxs(i.h3,{id:"see-also",children:["SEE ALSO",e.jsx(i.a,{"aria-hidden":"true",tabIndex:"-1",href:"#see-also",children:e.jsx(i.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(i.p,{children:[e.jsx(i.a,{href:"/forge/reference/overview",children:"forge"}),", ",e.jsx(i.a,{href:"/forge/reference/forge-clean",children:"forge clean"}),", ",e.jsx(i.a,{href:"/forge/reference/forge-inspect",children:"forge inspect"}),", ",e.jsx(i.a,{href:"/config/reference/solidity-compiler",children:"sparse-mode"}),", ",e.jsx(i.a,{href:"https://docs.soliditylang.org/en/latest/ir-breaking-changes.html",children:"ir-pipeline"}),", ",e.jsx(i.a,{href:"https://docs.soliditylang.org/en/latest/using-the-compiler.html#compiler-api",children:"output-desc"})]})]})}function m(s={}){const{wrapper:i}={...n(),...s.components};return i?e.jsx(i,{...s,children:e.jsx(r,{...s})}):r(s)}export{m as default,k as frontmatter};
